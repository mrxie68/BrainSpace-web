document.addEventListener("DOMContentLoaded",async function(){const o=document.getElementById("comments-container"),e=document.getElementById("loading-indicator"),t=document.getElementById("comments-container"),n=t?.dataset.envId,s=t?.dataset.spacepath;if(!n||!s){console.error("envId or spacePath not defined"),e.innerHTML="Failed to load comments. Please check the configuration.";return}e.style.display="block";try{const t=await twikoo.getRecentComments({envId:n,urls:[s],pageSize:3,includeReply:!1}),i=t.map(e=>e.commentText);e.style.display="none",displayAndSwitchComments(i,o)}catch(t){console.error("Failed to get comments:",t),e.style.display="none",e.innerHTML="Failed to load comments. Please try again later."}});function displayAndSwitchComments(e,t){const s=document.createDocumentFragment();e.forEach(e=>{const t=document.createElement("div");t.className="comment-wrapper",t.innerHTML=`<span style="overflow: hidden;font-size: 16px;font-weight: 800;text-overflow: ellipsis;display: -webkit-box; -webkit-box-orient: vertical;overflow: hidden;-webkit-line-clamp: 1;">${e}</span>`,s.appendChild(t)}),t.innerHTML="",t.appendChild(s);let n=0;t.children[n].classList.add("active"),t.style.display="block",setInterval(()=>{t.children[n].classList.remove("active"),n=(n+1)%e.length,t.children[n].classList.add("active","uk-animation-slide-bottom-small")},6e3)}var commentIndex=1,commentCard=document.getElementById("uk-card12wwdx1"),envId=commentCard?.dataset.envId,messagePath=commentCard?.dataset.messagepath,comments=[];document.getElementById("loading").style.display="none",twikoo.getRecentComments({envId,urls:[messagePath],pageSize:5,includeReply:!1}).then(function(e){if(comments=e,comments.length===0){console.log("No comments available");return}startCommentCarousel()}).catch(function(e){console.error("Failed to get comments:",e)});function startCommentCarousel(){const e={author:document.querySelector(".cardtop1__title"),content:document.querySelector(".cardtop1__subtitle"),time:document.querySelector("#commentTime"),avatarContainer:document.querySelector(".cardtop1__acounts"),animation:document.querySelector(".comment-animation")};function t(){const t=comments[commentIndex-1]||comments[0];e.animation.classList.add("uk-animation-slide-bottom-small"),e.author.innerHTML=`${t.nick}:`,e.content.innerHTML=t.comment,e.time.innerText=new Date(t.created).toLocaleString(),e.avatarContainer.innerHTML="",comments.slice(0,3).forEach((t,n)=>{const s=document.createElement("img");s.src=t.avatar,s.alt=`avatar ${n+1}`,s.id=`avatar_${n+1}`,e.avatarContainer.appendChild(s)}),commentIndex=commentIndex%comments.length+1,document.getElementById("commentIndex").innerText=commentIndex.toString(),setTimeout(()=>{e.animation.classList.remove("uk-animation-slide-bottom-small")},800)}t(),setInterval(t,15e3)}